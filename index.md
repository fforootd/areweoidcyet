---
image: https://areweoidcyet.com/assets/images/logo.png
---
[![Matrix](/assets/images/matrix-logo-white.svg)](https://matrix.org){: .logo} _Last updated: 2022-08-05_

```

                                       _     _                   _   ___ 
  __ _ _ __ ___  __      _____    ___ (_) __| | ___   _   _  ___| |_/ _ \
 / _` | '__/ _ \ \ \ /\ / / _ \  / _ \| |/ _` |/ __| | | | |/ _ \ __\// /
| (_| | | |  __/  \ V  V /  __/ | (_) | | (_| | (__  | |_| |  __/ |_  \/ 
 \__,_|_|  \___|   \_/\_/ \___|  \___/|_|\__,_|\___|  \__, |\___|\__| () 
                                                      |___/              
```

# Not Yet.

[What?](#what) ‚Ä¢ [Why?](#why) ‚Ä¢ [When?/Status](#when) ‚Ä¢ [FAQs](#faqs)

<a id="what"></a>
## What?

This site is being used to track the progress of [Matrix](https://matrix.org) migrating to OIDC for authentication. You can join the discussion at [#matrix-auth:matrix.org](https://matrix.to/#/#matrix-auth:matrix.org).

We have also set up the [Matrix OIDC Playground](https://github.com/vector-im/oidc-playground) which contains Homeservers, OIDC Providers and Clients for you to try out.

<a id="why"></a>
## Why?

For detailed background on the rationale to this project please see [MSC3861](https://github.com/matrix-org/matrix-spec-proposals/pull/3861).

***TL;DR** Currently Matrix uses a custom authentication protocol baked in to the Matrix spec. This poses a number of drawbacks. To overcome these drawbacks we are working to migrate to use OIDC instead.*

<a id="when"></a>
## When?

Good question. There are a number of moving parts to this project which are outlined below.

<a id="spec"></a>
### Matrix Spec

Related MSCs:

| Proposal | Status | Implementations |
| - | - | - |
| [MSC3861: Matrix architecture change to delegate authentication via OIDC](https://github.com/matrix-org/matrix-spec-proposals/pull/3861) | ‚úÖ Draft but ready for review once dependencies are also ready | n/a |
| [MSC2964: Delegation of auth from homeserver to OIDC Provider](https://github.com/matrix-org/matrix-spec-proposals/pull/2964) | üöß Draft | üöß Partial implementations in the [Playground](https://github.com/vector-im/oidc-playground) |
| [MSC2965: OIDC Provider discovery](https://github.com/matrix-org/matrix-spec-proposals/pull/2965) | ‚úÖ Draft, but feature complete | ‚úÖ Available in the [Playground](https://github.com/vector-im/oidc-playground) |
| [MSC2966: Usage of OAuth 2.0 Dynamic Client Registration in Matrix](https://github.com/matrix-org/matrix-spec-proposals/pull/2966) | üöß Draft | ‚úÖ Available in the [Playground](https://github.com/vector-im/oidc-playground) |
| [MSC2967: API scopes](https://github.com/matrix-org/matrix-spec-proposals/pull/2967) | üöß Not yet feature complete | üöß Partially implemented |
| [MSC3824: OIDC-aware clients](https://github.com/matrix-org/matrix-spec-proposals/pull/3824) | ‚úÖ Draft, but feature complete | ‚úÖ Available in the [Playground](https://github.com/vector-im/oidc-playground#clientsapplications-to-try)|

Outstanding key decision points:

- How will device IDs allocated? Currently these are generated by the Homeserver and tied to an access token
- How will UIA protected endpoints work?
- How does guest access work?

### Homeservers

TODO: Homeserver requirements + status.

<a id="clients"></a>
### Clients

[MSC3824](https://github.com/matrix-org/matrix-spec-proposals/pull/3824) proposes four types of Matrix client:

1. **OIDC native client** - This is a client that fully uses OIDC when talking to an OIDC enabled homeserver.
1. **OIDC aware client** - This is a client that is aware of OIDC but will still use existing auth types (e.g. `m.login.sso`) to auth with an OIDC enabled homeserver.
1. **Legacy client with SSO support** - This is a client that is not aware of OIDC but does support `m.login.sso` flow. e.g. Element Web, iOS, Android, Fluffy, Nheko, Cinny
1. **Legacy client without SSO support** - This is a client that is not aware of OIDC at all and nor does it support `m.login.sso` flow. Typically auth is done via `m.login.password` only. e.g. Fractal

#### OIDC Native clients

[Client implementation guide](./client-implementation-guide)

<table>
  <tr>
   <td><strong>Requirement</strong>
   </td>
   <td><strong></strong>
   </td>
   <td><strong>Relevant spec(s)</strong>
   </td>
   <td><strong>Hydrogen</strong>
   </td>
   <td><strong>Files SDK Demo</strong>
   </td>
   <td><strong>Element Web</strong>
   </td>
   <td><strong>Element iOS</strong>
   </td>
   <td><strong>Element Android</strong>
   </td>
   <td><strong>Element X iOS</strong>
   </td>
  </tr>
  <tr>
   <td>Discovery of OP in /.well-known/matrix/client
   </td>
   <td>REQUIRED
   </td>
   <td><a href="https://github.com/matrix-org/matrix-spec-proposals/pull/2965">MSC2965</a>
   </td>
   <td>‚úÖ
   </td>
   <td>‚úÖ
   </td>
   <td>‚ùå
   </td>
   <td>‚ùå
   </td>
   <td>‚ùå
   </td>
   <td>‚úÖ
   </td>
  </tr>
  <tr>
   <td>Discovery of OP web UI in /.well-known/matrix/client and outbound linking to it
   </td>
   <td>RECOMMENDED
   </td>
   <td><a href="https://github.com/matrix-org/matrix-spec-proposals/pull/2965">MSC2965</a>
   </td>
   <td>‚úÖ
   </td>
   <td>‚úÖ
   </td>
   <td>‚ùå
   </td>
   <td>‚ùå
   </td>
   <td>‚ùå
   </td>
   <td>‚ùå
   </td>
  </tr>
  <tr>
   <td>Dynamic client registration
   </td>
   <td>REQUIRED
   </td>
   <td><a href="https://github.com/matrix-org/matrix-spec-proposals/pull/2966">MSC2966</a> and <a href="https://datatracker.ietf.org/doc/html/rfc7591">RFC7591 OAuth 2.0 Dynamic Client Registration Protocol</a>
   </td>
   <td>‚úÖ
   </td>
   <td>‚úÖ
   </td>
   <td>‚ùå
   </td>
   <td>‚ùå
   </td>
   <td>‚ùå
   </td>
   <td>‚úÖ
   </td>
  </tr>
  <tr>
   <td>Signup flow - prompt=create
   </td>
   <td>REQUIRED
   </td>
   <td>
   </td>
   <td>‚úÖ
   </td>
   <td>‚úÖ
   </td>
   <td>‚ùå
   </td>
   <td>‚ùå
   </td>
   <td>‚ùå
   </td>
   <td>‚ùå
   </td>
  </tr>
  <tr>
   <td>Login flow -  no prompt param
   </td>
   <td>REQUIRED
   </td>
   <td>
   </td>
   <td>‚úÖ
   </td>
   <td>‚úÖ
   </td>
   <td>‚ùå
   </td>
   <td>‚ùå
   </td>
   <td>‚ùå
   </td>
   <td>‚ùå
   </td>
  </tr>
  <tr>
   <td>Refresh token handling
   </td>
   <td>REQUIRED
   </td>
   <td><a href="https://openid.net/specs/openid-connect-core-1_0.html">OpenID Connect Core 1.0</a>
   </td>
   <td>‚úÖ
   </td>
   <td>‚úÖ
   </td>
   <td>‚ùå
   </td>
   <td>‚ùå
   </td>
   <td>‚ùå
   </td>
   <td>‚ùå
   </td>
  </tr>
  <tr>
   <td>Sign out - Token revocation
   </td>
   <td>REQUIRED
   </td>
   <td><a href="https://datatracker.ietf.org/doc/html/rfc7009">RFC7009 Token Revocation</a>
   </td>
   <td>‚úÖ
   </td>
   <td>‚úÖ
   </td>
   <td>‚ùå
   </td>
   <td>‚ùå
   </td>
   <td>‚ùå
   </td>
   <td>‚ùå
   </td>
  </tr>
  <tr>
   <td><a href="https://github.com/matrix-org/matrix-authentication-service/issues/118">Re-auth for sensitive actions</a>
   </td>
   <td>REQUIRED
   </td>
   <td>The spec for this is not yet complete
   </td>
   <td>‚ùå
   </td>
   <td>‚ùå
   </td>
   <td>‚ùå
   </td>
   <td>‚ùå
   </td>
   <td>‚ùå
   </td>
   <td>‚ùå
   </td>
  </tr>
</table>

#### OIDC Aware clients

These are the requirements for a client to be OIDC-aware from [MSC3824](https://github.com/matrix-org/matrix-spec-proposals/blob/hughns/sso-redirect-action/proposals/3824-oidc-aware-clients.md#definition-of-oidc-aware):

|Requirement| |Relevant spec(s)|Element Web|Element iOS|Element Android|
|--- |--- |--- |--- |--- |--- |
| Support the `m.login.sso` auth flow | REQUIRED | [Matrix Spec](https://spec.matrix.org/latest/client-server-api/#sso-client-login) | ‚úÖ | ‚úÖ | ‚úÖ |
|Where a `delegated_oidc_compatibility` value of `true` is present on an `m.login.sso` then only offer that auth flow to the user|RECOMMENDED|MSC3824|üéì [PR](https://github.com/matrix-org/matrix-react-sdk/pull/8681)|‚ùå|üöß [PR](https://github.com/vector-im/element-android/pull/6367)|
| Append `action=login` and `action=register` parameters to the SSO redirect URLs|RECOMMENDED|MSC3824|üéì [PR](https://github.com/matrix-org/matrix-react-sdk/pull/8681)|‚ùå|üöß [PR](https://github.com/vector-im/element-android/pull/6367)|
|Sign post and link users to manage their account at the OP web UI given by MSC2965|RECOMMENDED|MSC2965 and MSC3824|üéì [PR](https://github.com/matrix-org/matrix-react-sdk/pull/8681)|‚ùå|‚ùå|
| Label the SSO button as "Continue"|RECOMMENDED|MSC3824|üéì [PR](https://github.com/matrix-org/matrix-react-sdk/pull/8681)|‚ùå|üöß [PR](https://github.com/vector-im/element-android/pull/6367)|

### OIDC Providers

TODO: OP requirements + status.

<a id="faqs"></a>
## FAQs
TODO

#### How will this work with E2EE?

#### Does this mean I can't combine E2EE & account password?

#### How does this work with QR code login?

#### What do I do for my nintendo 3DS which doesn't have a web browser?

#### Will I lose my old-style login/password?

#### Are we going to migrate existing accounts over?

#### Are you really rebuilding all of Keycloak in matrix-auth-service?!

#### How do I do social login with this?

#### Will clients need to support both old-style and new-style auth?

#### How do I migrate from my existing SSO to new-style OIDC?

#### Does this mean that the login page/screen's branding isn't going to match the branding of my app any more?
